<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LED Wall Configurator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
      height: 100vh;
      display: flex;
    }

    .container {
      display: flex;
      width: 100%;
    }

    .calculator-container {
      width: 40%;
      padding: 20px;
      background: #fff;
      border-right: 2px solid #ddd;
      box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
      overflow-y: auto;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .form-control {
      padding: 8px;
      width: 90%;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .btn {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
    }

    #3d-container {
      width: 60%;
      height: 100vh;
      background: #e0e0e0;
      position: relative;
    }

    #screen-size-label {
      margin-top: 20px;
      font-weight: bold;
      color: #333;
    }

    #dimension-overlay {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 16px;
      font-weight: bold;
      color: #000;
      background: rgba(255, 255, 255, 0.8);
      padding: 5px 10px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
<div class="container">
  <!-- Config Section -->
  <div class="calculator-container">
    <h1>LED Wall Configurator</h1>

    <div class="form-group">
      <label for="environment">Environment</label>
      <select id="environment" class="form-control">
        <option value="Indoor">Indoor</option>
        <option value="Outdoor" selected>Outdoor</option>
      </select>
    </div>

    <div class="form-group">
      <label for="viewing-distance">Viewing Distance (m)</label>
      <input type="number" id="viewing-distance" class="form-control" min="1" value="50">
    </div>

    <div class="form-group">
      <label for="series">Series</label>
      <select id="series" class="form-control">
        <option value="Earth">Earth</option>
        <option value="Sky">Sky</option>
        <option value="Nova">Nova</option>
      </select>
    </div>

    <div class="form-group">
      <label for="pixel-pitch">Pixel Pitch (mm)</label>
      <input type="number" id="pixel-pitch" class="form-control" value="2.9">
    </div>

    <div class="form-group">
      <label for="width">Screen Width (m)</label>
      <input type="number" id="width" class="form-control" value="6">
    </div>

    <div class="form-group">
      <label for="height">Screen Height (m)</label>
      <input type="number" id="height" class="form-control" value="3">
    </div>

    <button class="btn" onclick="renderScreen()">Generate</button>

    <div id="screen-size-label"></div>
  </div>

  <!-- 3D Display -->
  <div id="3d-container">
    <div id="dimension-overlay"></div>
  </div>
</div>
<script>
  let scene, camera, renderer, ledWall;

  function init3D() {
    const container = document.getElementById('3d-container');

    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(container.clientWidth, container.clientHeight);
    container.appendChild(renderer.domElement);

    scene = new THREE.Scene();
    const aspect = container.clientWidth / container.clientHeight;
    camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 1000);
    camera.position.z = 20;

    const light = new THREE.AmbientLight(0xffffff, 1);
    scene.add(light);

    scene.background = new THREE.Color(0xf0f0f0);

    const axesHelper = new THREE.AxesHelper(5);
    scene.add(axesHelper);

    renderScreen(); // initial render
    animate();
  }

  function animate() {
    requestAnimationFrame(animate);
    if (ledWall) {
      ledWall.rotation.y += 0.005;
      ledWall.rotation.x += 0.002;
    }
    renderer.render(scene, camera);
  }

  function renderScreen() {
    const width = parseFloat(document.getElementById('width').value) || 1;
    const height = parseFloat(document.getElementById('height').value) || 1;
    const pitch = parseFloat(document.getElementById('pixel-pitch').value) || 2.5;

    if (ledWall) {
      scene.remove(ledWall);
    }

    const geometry = new THREE.BoxGeometry(width, height, 0.2);
    const material = new THREE.MeshStandardMaterial({
      color: 0x0033aa,
      metalness: 0.3,
      roughness: 0.6
    });
    ledWall = new THREE.Mesh(geometry, material);
    ledWall.position.z = -1;
    scene.add(ledWall);

    camera.position.z = Math.max(width, height) * 2;
    camera.lookAt(ledWall.position);

    document.getElementById('screen-size-label').innerText =
      `LED Wall Size: ${width.toFixed(2)}m x ${height.toFixed(2)}m | Pixel Pitch: ${pitch.toFixed(1)}mm`;

    document.getElementById('dimension-overlay').innerText =
      `${width.toFixed(2)}m Ã— ${height.toFixed(2)}m`;
  }

  window.addEventListener('resize', () => {
    const container = document.getElementById('3d-container');
    camera.aspect = container.clientWidth / container.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(container.clientWidth, container.clientHeight);
  });

  window.addEventListener("DOMContentLoaded", init3D);
</script>
</body>
</html>
